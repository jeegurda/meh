(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
"use strict";var constants=require("./constants");module.exports={changeSlide:function(t){this.dispatch(constants.CHANGE_SLIDE,t)},changeHeroSlide:function(t){this.dispatch(constants.CHANGE_HERO_SLIDE,t)},cooperate:function(){this.dispatch(constants.COOPERATE)},formCooperateToggle:function(t,n){this.dispatch(constants.FORM_COOPERATE_TOGGLE,{state:t,DOM:n})},formAppointmentToggle:function(t,n){this.dispatch(constants.FORM_APPOINTMENT_TOGGLE,{state:t,DOM:n})},cooperateCounterChange:function(t){this.dispatch(constants.COOPERATE_COUNTER_CHANGE,t)},selectService:function(t){this.dispatch(constants.SELECT_SERVICE,t)},serviceSelectToggle:function(t){this.dispatch(constants.SERVICE_SELECT_TOGGLE,t)},initInputs:function(t,n,s){this.dispatch(constants.INIT_INPUTS,{form:t,phoneInput:n,DOM:s})},submitForm:function(t,n){this.dispatch(constants.SUBMIT_FORM,{form:t,DOM:n})},navMobileToggle:function(t){this.dispatch(constants.NAV_MOBILE_TOGGLE,t)},scrollToSection:function(t){this.dispatch(constants.SCROLL_TO_SECTION,t)}};
},{"./constants":9}],2:[function(require,module,exports){
"use strict";var Appointment=React.createClass({displayName:"Appointment",mixins:[FluxMixin],formAppointmentToggle:function(e){var t=this.props.parent;this.getFlux().actions.formAppointmentToggle(e,t.DOM)},componentDidMount:function(){var e=this.props.parent;this.getFlux().actions.initInputs("formAppointmentElement","formAppointmentPhoneInput",e.DOM),e.DOM.formAppointment.noValidate=!0},selectService:function(e){this.getFlux().actions.selectService(e),this.getFlux().actions.serviceSelectToggle(!1)},serviceSelectToggle:function(e){this.getFlux().actions.serviceSelectToggle()},handleSubmit:function(e){var t=this.props.parent;this.getFlux().stores.MehStore.validateForm("formAppointment",t.DOM)&&this.getFlux().actions.submitForm("formAppointment",t.DOM),e.preventDefault()},render:function(){var e=this.getFlux().stores.MehStore,t=e.getState(),n=this.props.parent,a=e.dict,i=this,c=require("./formSent.jsx"),l=a.services[t.selectedService];return React.createElement("section",{ref:function(e){n.DOM.formAppointmentElement=e},className:"form form-appointment "+(t.formAppointmentVisible?"visible":"")},t.formAppointmentSent?React.createElement(c,null):React.createElement("section",{className:"form-container"},React.createElement("header",null,React.createElement("h4",null,a.formAppointmentTitle),React.createElement("h5",null,a.formAppointmentSelect)),React.createElement("form",{ref:function(e){n.DOM.formAppointment=e},method:"POST",action:"https://formspree.io/komolkin@gmail.com",onSubmit:this.handleSubmit},React.createElement("div",{className:"service-select "+(t.serviceSelectOpen?"open":"")},React.createElement("div",{className:"ss-title",onClick:this.serviceSelectToggle},React.createElement("div",{className:"form-padded"},React.createElement("div",{className:"sst-container"},React.createElement("p",null,l.title),React.createElement("span",null,l.price," ₽ – ",l.time)))),React.createElement("div",{className:"ss-dropdown"},a.services.map(function(e,n){return React.createElement("div",{className:"ssd-item "+(n===t.selectedService?"selected":""),key:n,onClick:i.selectService.bind(null,n)},React.createElement("span",{className:"ssd-title"},e.title),React.createElement("span",{className:"ssd-price"},e.price))})),React.createElement("input",{type:"hidden",name:"service",value:a.services[t.selectedService].title})),React.createElement("div",{className:"form-padded"},Object.keys(a.formAppointmentFields).map(function(e,t){var i=a.formAppointmentFields[e];return React.createElement("div",{className:"input",key:t},React.createElement("input",{type:i.type,required:i.required,ref:"tel"===i.type?function(e){n.DOM.formAppointmentPhoneInput=e}:null,"data-regexp":i.regexp||null,name:e}),React.createElement("span",{className:"placeholder"},i.displayName),React.createElement("p",{className:"input-error"},i.displayName))}),React.createElement("button",{className:"button light"},React.createElement("span",null,a.formSubmitAppointment))))),React.createElement("footer",{onClick:this.formAppointmentToggle.bind(null,!1),className:"form-hide"}))}});module.exports=Appointment;
},{"./formSent.jsx":5}],3:[function(require,module,exports){
"use strict";var Content=React.createClass({displayName:"Content",mixins:[FluxMixin],changeSlide:function(e){this.getFlux().actions.changeSlide(parseInt(e.target.getAttribute("data-index")))},changeHeroSlide:function(e){this.getFlux().actions.changeHeroSlide(parseInt(e.target.getAttribute("data-index")))},cooperate:function(){this.getFlux().actions.cooperate()},formCooperateToggle:function(e){var t=this.props.parent;this.getFlux().actions.formCooperateToggle(e,t.DOM)},formAppointmentToggle:function(e){var t=this.props.parent;this.getFlux().actions.formAppointmentToggle(e,t.DOM)},cooperateCounterChange:function(e){this.getFlux().actions.cooperateCounterChange(e)},render:function(){var e,t=this.getFlux().stores.MehStore,a=t.getState(),c=t.dict,n=this,l=this.props.parent,r=function(e){var t=[];return Object.keys(a.slider).forEach(function(c){var n=a.slider[c];e===n.index&&t.push(n.className)}),t.join(" ")},i=function(e){var t=[];return Object.keys(a.heroSlider).forEach(function(c){var n=a.heroSlider[c];e===n.index&&t.push(n.className)}),t.join(" ")};return e=a.cooperate?React.createElement("div",{className:"cc-block"},React.createElement("p",null,c.contentCooperateEarnings),React.createElement("div",{className:"cc-middle"},React.createElement("div",{className:"ccm-result"},l.utils.format(a.weekEarnings))),React.createElement("button",{className:"button",onClick:this.formCooperateToggle.bind(null,!0)},React.createElement("span",null,c.contentCooperateShowForm))):React.createElement("div",{className:"cc-block"},React.createElement("p",null,c.contentCooperateTime),React.createElement("div",{className:"cc-middle"},React.createElement("div",{className:"ccm-decrease",onClick:this.cooperateCounterChange.bind(null,-1)}),React.createElement("div",{className:"ccm-counter"},a.cooperateCounter),React.createElement("div",{className:"ccm-increase",onClick:this.cooperateCounterChange.bind(null,1)})),React.createElement("button",{className:"button",onClick:this.cooperate},React.createElement("span",null,c.contentCooperateCount))),React.createElement("section",{className:"content"},React.createElement("div",{className:"content-slides"},React.createElement("div",{className:"content-slide content-index "+r(0)},React.createElement("div",{className:"content-hero-slider"},React.createElement("div",{className:"chs-slides"},c.heroSlides.map(function(e,t){return React.createElement("div",{className:"chs-slide "+i(t),key:t},React.createElement("img",{src:"./static/images/"+e.image,alt:""}))})),React.createElement("div",{className:"container-relative"},React.createElement("div",{className:"chs-texts"},c.heroSlides.map(function(e,t){return React.createElement("div",{className:"chs-text "+(t===a.heroSlider.slide.index?a.heroSlider.slide.className:""),key:t},React.createElement("article",null,React.createElement("p",null,e.text),React.createElement("span",null,e.annotation)))})),React.createElement("div",{className:"chs-controls"},React.createElement("ul",null,c.heroSlides.map(function(e,t){return React.createElement("li",{className:t===a.heroSlider.slide.index?a.heroSlider.slide.className:"","data-index":t,onClick:n.changeHeroSlide,key:t})}))))),React.createElement("div",{className:"container-relative"},React.createElement("div",{className:"content-social"},c.links.map(function(e,t){return React.createElement("a",{className:e.className,target:"_blank",href:e.url,key:t})}))),React.createElement("div",{className:"content-appointment",onClick:this.formAppointmentToggle.bind(this,!0)},React.createElement("div",{className:"container"},c.contentAppointment))),React.createElement("div",{className:"content-slide content-idea "+r(1)},React.createElement("div",{className:"container padded"},React.createElement("div",{className:"ci-container"},c.contentIdea.map(function(e,t){return React.createElement("div",{className:"ci-item content-block",key:t},React.createElement("figure",null,React.createElement("img",{src:"./static/images/"+e.image,alt:""})),React.createElement("h3",null,e.title),React.createElement("p",null,e.text))})))),React.createElement("div",{className:"content-slide content-features "+r(2)},React.createElement("div",{className:"container padded"},React.createElement("div",{className:"cf-container"},c.contentFeatures.map(function(e,t){return React.createElement("div",{className:"cf-item content-block",key:t},React.createElement("h3",null,e.title),React.createElement("p",null,e.text))})))),React.createElement("div",{className:"content-slide content-prices "+r(3)},React.createElement("div",{className:"container padded"},React.createElement("div",{className:"cp-container"},c.contentPrices.map(function(e,t){return React.createElement("div",{className:"cp-item content-block",key:t},React.createElement("div",{className:"cp-price"},e.price),React.createElement("h3",null,e.title),React.createElement("p",null,e.text))})))),React.createElement("div",{className:"content-slide content-cooperate "+r(4)},React.createElement("div",{className:"container padded"},React.createElement("div",{className:"cc-container content-block"},React.createElement("h4",null,c.contentCooperateTitle),e)))),React.createElement("div",{className:"container-relative"},React.createElement("div",{className:"content-controls"},React.createElement("ul",null,[1,2,3,4,5].map(function(e,t){return React.createElement("li",{"data-index":t,onClick:n.changeSlide,className:t===a.slider.slide.index?a.slider.slide.className:"",key:t})})))))}});module.exports=Content;
},{}],4:[function(require,module,exports){
"use strict";var Cooperate=React.createClass({displayName:"Cooperate",mixins:[FluxMixin],formCooperateToggle:function(e){var t=this.props.parent;this.getFlux().actions.formCooperateToggle(e,t.DOM)},componentDidMount:function(){var e=this.props.parent;this.getFlux().actions.initInputs("formCooperateElement","formCooperatePhoneInput",e.DOM),e.DOM.formCooperate.noValidate=!0},handleSubmit:function(e){var t=this.props.parent;this.getFlux().stores.MehStore.validateForm("formCooperate",t.DOM)&&this.getFlux().actions.submitForm("formCooperate",t.DOM),e.preventDefault()},render:function(){var e=this.getFlux().stores.MehStore,t=e.getState(),o=this.props.parent,r=e.dict,a=require("./formSent.jsx");return React.createElement("section",{ref:function(e){o.DOM.formCooperateElement=e},className:"form form-cooperate "+(t.formCooperateVisible?"visible":"")},t.formCooperateSent?React.createElement(a,null):React.createElement("section",{className:"form-container"},React.createElement("header",null,React.createElement("h4",null,r.formCooperateTitle),React.createElement("h5",null,r.formCooperateSelect)),React.createElement("form",{ref:function(e){o.DOM.formCooperate=e},method:"POST",action:"https://formspree.io/komolkin@gmail.com",onSubmit:this.handleSubmit},React.createElement("div",{className:"form-padded"},Object.keys(r.formCooperateFields).map(function(e,t){var a=r.formCooperateFields[e];return React.createElement("div",{className:"input",key:t},React.createElement("input",{type:a.type,required:a.required,ref:"tel"===a.type?function(e){o.DOM.formCooperatePhoneInput=e}:null,"data-regexp":a.regexp||null,name:e}),React.createElement("span",{className:"placeholder"},a.displayName),React.createElement("p",{className:"input-error"},a.displayName))}),React.createElement("button",{className:"button light"},React.createElement("span",null,r.formSubmitCooperate))))),React.createElement("footer",{onClick:this.formCooperateToggle.bind(null,!1),className:"form-hide"}))}});module.exports=Cooperate;
},{"./formSent.jsx":5}],5:[function(require,module,exports){
"use strict";var FormSent=React.createClass({displayName:"FormSent",mixins:[FluxMixin],render:function(){var e=this.getFlux(),t=e.stores.MehStore.dict;return React.createElement("section",{className:"form-sent"},React.createElement("div",{className:"fs-container"},React.createElement("span",{className:"fs-icon"}),React.createElement("h4",null,t.formSentTitle),React.createElement("p",null,t.formSentText)))}});module.exports=FormSent;
},{}],6:[function(require,module,exports){
"use strict";var Header=React.createClass({displayName:"Header",mixins:[FluxMixin],changeSlide:function(e){this.getFlux().actions.changeSlide(parseInt(e.currentTarget.getAttribute("data-index"))+1)},toggleAppointmentForm:function(e){var t=this.props.parent;this.getFlux().actions.formAppointmentToggle(e,t.DOM)},toggleNavMobile:function(){var e=this.getFlux().stores.MehStore.getState().navMobileVisible;this.getFlux().actions.navMobileToggle(!e)},render:function(){var e=this,t=this.getFlux(),a=t.stores.MehStore.dict,l=t.stores.MehStore,n=l.getState();return React.createElement("header",{className:"header"},React.createElement("div",{className:"container-relative padded"},React.createElement("a",{href:"",className:"h-logo"},React.createElement("img",{className:"hl-light",src:"./static/images/logo-b.svg",alt:""}),React.createElement("img",{className:"hl-dark",src:"./static/images/logo-w.svg",alt:""})),React.createElement("div",{className:"h-appointment"},React.createElement("button",{className:"button",onClick:this.toggleAppointmentForm.bind(null,!0)},React.createElement("span",null,a.headerAppointment))),React.createElement("nav",{className:"h-nav"},React.createElement("ul",null,a.headerNav.map(function(t,a){return React.createElement("li",{"data-index":a,key:a,className:a===n.slider.slide.index-1?n.slider.slide.className:"",onClick:e.changeSlide},React.createElement("span",null,t))})))),React.createElement("div",{className:"nm-toggle",onClick:this.toggleNavMobile},React.createElement("span",{className:"nmt-show"}),React.createElement("span",{className:"nmt-hide"})))}});module.exports=Header;
},{}],7:[function(require,module,exports){
"use strict";var MehApp=React.createClass({displayName:"MehApp",mixins:[FluxMixin,Fluxxor.StoreWatchMixin("MehStore")],getDefaultProps:function(){return{}},DOM:{},getStateFromFlux:function(){var e=this.getFlux().stores.MehStore.getState();return e},componentWillMount:function(){this.utils=this.utils()},getInitialState:function(){this.props;return{}},render:function(){var e=require("./header.jsx"),t=require("./content.jsx"),r=require("./cooperate.jsx"),i=require("./appointment.jsx"),n=require("./navMobile.jsx");return React.createElement("div",{className:"meh"+(this.state.theme?" "+this.state.theme:"")+(this.state.formCooperateVisible||this.state.formAppointmentVisible?" form-visible":"")+(this.state.navMobileVisible?" nav-mobile-visible":"")},React.createElement(e,{parent:this}),React.createElement(t,{parent:this}),React.createElement("div",{className:"content-dimmer"}),React.createElement(n,null),React.createElement(r,{parent:this}),React.createElement(i,{parent:this}))},utils:function(){return{format:function(e){return e.toString().replace(/(\d)(?=(\d\d\d)+(?!\d))/g,"$1 ")},log:function(){var e=Array.prototype.slice.call(arguments),t=e[0];"warn"===t||"error"===t||"debug"===t?e.shift():t="log","string"==typeof e[0]?e[0]="Meh: "+e[0]:e=["Meh:"].concat(e),console[t].apply(console,e)}}}});module.exports=MehApp;
},{"./appointment.jsx":2,"./content.jsx":3,"./cooperate.jsx":4,"./header.jsx":6,"./navMobile.jsx":8}],8:[function(require,module,exports){
"use strict";var NavMobile=React.createClass({displayName:"NavMobile",mixins:[FluxMixin],scrollToSection:function(e){this.getFlux().actions.scrollToSection(parseInt(e.currentTarget.getAttribute("data-index"))+1)},render:function(){var e=this.getFlux(),t=e.stores.MehStore.dict,a=this,l=e.stores.MehStore.getState();return React.createElement("section",{className:"nav-mobile"+(l.navMobileVisible?" visible":"")},React.createElement("ul",{className:"nm-list"},t.headerNav.map(function(e,t){return React.createElement("li",{"data-index":t,key:t,onClick:a.scrollToSection},React.createElement("span",null,e))})),React.createElement("div",{className:"content-social"},t.links.map(function(e,t){return React.createElement("a",{className:e.className,href:e.url,target:"_blank",key:t})})))}});module.exports=NavMobile;
},{}],9:[function(require,module,exports){
module.exports={CHANGE_SLIDE:"CHANGE_SLIDE",CHANGE_HERO_SLIDE:"CHANGE_HERO_SLIDE",COOPERATE:"COOPERATE",FORM_COOPERATE_TOGGLE:"FORM_COOPERATE_TOGGLE",FORM_APPOINTMENT_TOGGLE:"FORM_APPOINTMENT_TOGGLE",COOPERATE_COUNTER_CHANGE:"COOPERATE_COUNTER_CHANGE",SELECT_SERVICE:"SELECT_SERVICE",SERVICE_SELECT_TOGGLE:"SERVICE_SELECT_TOGGLE",INIT_INPUTS:"INIT_INPUTS",SUBMIT_FORM:"SUBMIT_FORM",NAV_MOBILE_TOGGLE:"NAV_MOBILE_TOGGLE",SCROLL_TO_SECTION:"SCROLL_TO_SECTION"};
},{}],10:[function(require,module,exports){
module.exports={ru:{links:[{className:"cs-facebook",url:"#"},{className:"cs-instagram",url:"#"},{className:"cs-twitter",url:"#"}],headerNav:["Как это работает","Удобство","Цены","Барберам"],headerAppointment:"Записаться",contentAppointment:"Записаться",heroSlides:[{text:"Важный момент — у нас не салоны красоты. Вам не будут пять раз мыть голову и не станут прыгать вокруг на протяжении полутора часов.",annotation:"Егор Тсодов, барбер, 27 лет",image:"photo-01.png"},{text:"Мы пользуемся мужскими средствами Baxter of California, Reuzel, Mr Natty, Uppercut Deluxe, Suavecito.",annotation:"Алексей Рожков, барбер, 30 лет",image:"photo-02.png"},{text:"Сидите с ноутбуком, угощайтесь «Хайнекеном» или крепким кофе с молоком – нам не жалко.",annotation:"Александр Ильясюк, барбер, 25 лет",image:"photo-03.png"}],contentIdea:[{title:"Запишитесь к барберу",text:"В удобное для вас время и место",image:"image-01.png"},{title:"Съездите к барберу",text:"У него есть все необходимое",image:"image-02.png"},{title:"Платите за результат",text:"И наслаждайтесь новой стрижкой",image:"image-03.png"}],contentFeatures:[{title:"Низкие цены",text:"Вы платие барберу, а не салону"},{title:"Лучшие барберы",text:"У нас не бывает случайных людей — только те, кто прошел отбор"},{title:"Удобное место и время",text:"Наши барберы работают по всему городу"}],contentPrices:[{price:"1500",title:"Стрижка",text:"60 мин"},{price:"800",title:"Стрижка машинкой",text:"30 мин"},{price:"500",title:"Усы и борода",text:"30 мин"}],contentCooperateTitle:"Хотите с нами сотрудничать?",contentCooperateEarnings:"В неделю вы сможете зарабатывать",contentCooperateTime:"Сколько часов вы готовы работать в день",contentCooperateShowForm:"Заполнить заявку",contentCooperateCount:"Посчитать",formAppointmentTitle:"Назначить встречу",formAppointmentSelect:"Выберите одну или несколько услуг",formCooperateTitle:"Заявка на сотрудничество",formCooperateSelect:"Заполните форму ниже",services:[{title:"Стрижка",price:1500,time:"20 мин."},{title:"Стрижка машинкой",price:800,time:"10 мин."},{title:"Стрижка бороды",price:500,time:"15 мин."},{title:"Стрижка + борода",price:1900,time:"30 мин."},{title:"Стрижка машинкой + борода",price:1200,time:"25 мин."}],formAppointmentFields:{name:{displayName:"Имя",required:!0,type:"text"},phone:{displayName:"Телефон",required:!0,type:"tel",regexp:"^\\+7 \\(\\d\\d\\d\\) \\d\\d\\d-\\d\\d-\\d\\d$"},email:{displayName:"E-mail",required:!0,type:"email"}},formCooperateFields:{name:{displayName:"Имя",required:!0,type:"text"},phone:{displayName:"Телефон",required:!0,type:"tel",regexp:"^\\+7 \\(\\d\\d\\d\\) \\d\\d\\d-\\d\\d-\\d\\d$"},facebook:{displayName:"Facebook",required:!0,type:"text"}},formSubmitAppointment:"Записаться",formSubmitCooperate:"Отправить заявку",validationMessage:{text:"обязательное поле",email:"введен неверно",tel:"введен неверно"},formSentTitle:"Спасибо",formSentText:"Мы скоро с вами свяжемся"},en:{}};
},{}],11:[function(require,module,exports){
"use strict";if(!Array.prototype.map)throw new Error("This browser doesn't support ES5");window.FluxMixin=Fluxxor.FluxMixin(React);var MehStore=require("./stores/mehStore"),stores={MehStore:new MehStore},actions=require("./actions"),flux=new Fluxxor.Flux(stores,actions);$(function(){var e=require("./components/mehApp.jsx");window.Meh_G=ReactDOM.render(React.createElement(e,{flux:flux}),document.getElementById("meh-root"))});
},{"./actions":1,"./components/mehApp.jsx":7,"./stores/mehStore":13}],12:[function(require,module,exports){
module.exports=function(e,t){if(!e||!e.nodeName||"input"!==e.nodeName.toLowerCase())throw new Error("Specified argument is not an input");var n="+7 (ddd) ddd-dd-dd",i=(n.split(""),""),s=function(e){var s,d="",o=this.value;o.split("");s=o.length<i.length;var l=this.selectionStart,a=this.selectionEnd,r=0,f=0;for(var h in n)if(h=parseInt(h,10),"undefined"==typeof o[f]){if("d"===n[h])break;s||(d+=n[h],l>=h&&r++)}else if("d"===n[h])for(;"undefined"!=typeof o[f];){if(o[f].match(/\d/)){d+=o[f],f++;break}f++}else o[f]===n[h]?(d+=o[f],f++):(d+=n[h],l>=h&&r++);console.log("start %s, inserted %s, fs %s, ls %s, os %s, decreasing %s",l,r,d.length,i.length,o.length,s),this.value=d,o?this.setSelectionRange(l+(s?0:r),a+(s?0:r)):this.setSelectionRange(d.length,d.length),i=d,t&&"function"==typeof t&&t.call(this)};e.addEventListener("focus",function(){s.call(this)}),e.addEventListener("input",function(){s.call(this)})};
},{}],13:[function(require,module,exports){
"use strict";var constants=require("./../constants"),mehStore=Fluxxor.createStore({initialize:function(){this.bindActions(constants.CHANGE_SLIDE,this.onSlideChange,constants.CHANGE_HERO_SLIDE,this.onHeroSlideChange,constants.COOPERATE,this.onCooperate,constants.FORM_COOPERATE_TOGGLE,this.onFormCooperateToggle,constants.FORM_APPOINTMENT_TOGGLE,this.onFormAppointmentToggle,constants.COOPERATE_COUNTER_CHANGE,this.onCooperateCounterChange,constants.SELECT_SERVICE,this.onServiceSelect,constants.SERVICE_SELECT_TOGGLE,this.onServiceSelectToggle,constants.INIT_INPUTS,this.onInitInputs,constants.SUBMIT_FORM,this.onSubmitForm,constants.NAV_MOBILE_TOGGLE,this.onNavMobileToggle,constants.SCROLL_TO_SECTION,this.onScrollToSection),this.language="ru",this.cooperate=!1,this.cooperateCounter=1,this.earningsMultiplier=24600,this.formCooperateVisible=!1,this.formCooperateSent=!1,this.formAppointmentVisible=!1,this.formAppointmentSent=!1,this.selectedService=0,this.navMobileVisible=!1,this.weekEarnings=0,this.dict=require("./../dict")[this.language],this.heroSlider={slide:{index:0,className:"active"},prevOutSlide:{index:null,className:"prev-out"},prevInSlide:{index:null,className:"prev-in"},nextOutSlide:{index:null,className:"next-out"},nextInSlide:{index:null,className:"next-in"}},this.heroSliderChangeInterval=4e3,this.heroSliderInit(),this.slider={slide:{index:null,className:"active"},prevOutSlide:{index:null,className:"prev-out"},prevInSlide:{index:null,className:"prev-in"},nextOutSlide:{index:null,className:"next-out"},nextInSlide:{index:null,className:"next-in"}},this.onSlideChange(0),this.initWheel(),this.initScroll()},isMobile:function(){return window.innerWidth<=500},initScroll:function(){var e=this;$(window).scroll(function(){e.isMobile()&&(window.scrollY>=window.innerHeight-65&&"dark"!==e.theme?(e.theme="dark",e.emit("change")):window.scrollY<window.innerHeight-65&&null!==e.theme&&(e.theme=null,e.emit("change")))})},initWheel:function(){var e,i=0,t=!1,n=0,o=this,l=1e3,r=function(){t=!0,setTimeout(function(){t=!1},l);var e=o.slider.slide.index;i>0&&e<o.dict.headerNav.length?o.onSlideChange(e+1):0>i&&e>0&&o.onSlideChange(e-1)};$(document).on("wheel",function(s){var a=s.originalEvent;t||o.formCooperateVisible||o.formAppointmentVisible||o.isMobile()||!a.deltaY||(clearTimeout(e),e=setTimeout(function(){Math.abs(i)>n&&r(i),i=0},l),i+=a.deltaY<0?-1:1,Math.abs(i)>n&&(clearTimeout(e),r(i),i=0))})},onServiceSelect:function(e){this.selectedService=e,this.emit("change")},onServiceSelectToggle:function(e){"undefined"!=typeof e?this.serviceSelectOpen=e:this.serviceSelectOpen=!this.serviceSelectOpen,this.emit("change")},onSlideChange:function(e){var i=this,t=this.slider.slide.index;e>t?(this.slider.prevOutSlide.index=t,this.slider.nextInSlide.index=e,setTimeout(function(){i.slider.prevOutSlide.index=null,i.slider.nextInSlide.index=null,i.emit("change")},1e3)):t>e&&(this.slider.prevInSlide.index=t,this.slider.nextOutSlide.index=e,setTimeout(function(){i.slider.prevInSlide.index=null,i.slider.nextOutSlide.index=null,i.emit("change")},1e3)),this.slider.slide.index=e,e>0?(this.theme="dark",this.heroSliderChangeInterval&&this.heroSliderTimer.stop()):(this.theme=null,this.heroSliderChangeInterval&&this.heroSliderTimer.start()),this.emit("change")},heroSliderInit:function(){if(this.heroSliderChangeInterval){var e=this;e.heroSliderTimer={id:null,start:function(){e.heroSliderTimer.id=setTimeout(function(){e.onHeroSlideChange(e.heroSlider.slide.index+1)},e.heroSliderChangeInterval)},stop:function(){clearTimeout(e.heroSliderTimer.id)},restart:function(){e.heroSliderTimer.stop(),e.heroSliderTimer.start()}}}},onNavMobileToggle:function(e){this.navMobileVisible=e,this.emit("change")},onHeroSlideChange:function(e){var i,t=this,n=this.heroSlider.slide.index,o=this.dict.heroSlides.length-1;i=e>o?0:0>e?o:e,e>n?(this.heroSlider.prevOutSlide.index=n,this.heroSlider.nextInSlide.index=i,setTimeout(function(){t.heroSlider.prevOutSlide.index=null,t.heroSlider.nextInSlide.index=null,t.emit("change")},1e3)):n>e&&(this.heroSlider.prevInSlide.index=n,this.heroSlider.nextOutSlide.index=i,setTimeout(function(){t.heroSlider.prevInSlide.index=null,t.heroSlider.nextOutSlide.index=null,t.emit("change")},1e3)),this.heroSliderTimer.restart(),this.heroSlider.slide.index=i,this.emit("change")},onCooperate:function(){this.cooperate=!0,this.weekEarnings=this.cooperateCounter*this.earningsMultiplier,this.emit("change")},toggleForm:function(e,i){if(this[e+"Visible"]!==i.state){if(i.state===!0){var t=!1;$(i.DOM[e+"Element"]).on("click."+e,function(e){t=!0});var n=this;$(document).on("click."+e,function(o){t||n.flux.actions[e+"Toggle"](!1,i.DOM),t=!1})}else{if(i.state!==!1)throw new Error("Bad action");$(i.DOM[e+"Element"]).off("."+e),$(document).off("."+e)}this[e+"Visible"]=i.state,this.emit("change")}},onFormCooperateToggle:function(e){this.toggleForm("formCooperate",e)},onFormAppointmentToggle:function(e){this.toggleForm("formAppointment",e)},onCooperateCounterChange:function(e){this.cooperateCounter+=e,this.cooperateCounter<1?this.cooperateCounter=1:this.cooperateCounter>12&&(this.cooperateCounter=12),this.emit("change")},onSubmitForm:function(e){var i=this,t=e.DOM[e.form];$.ajax({dataType:"json",data:$(t).serialize(),type:t.method||"post",url:t.action||"/",success:function(t){i[e.form+"Sent"]=!0,i.emit("change")},error:function(e){},complete:function(){}})},validateForm:function(e,i){var t,n,o=this,e=i[e];if(e instanceof $){if(t=e[0],n=e,!t)return void console.error("form validation: Empty jQuery object")}else{if(!(e instanceof HTMLElement))return void console.error("form validation: Argument is not a container. Must be called with HTMLElement or jQuery object");t=e,n=$(e)}var l=n.find("[required]");if(!l[0])return void console.error("form validation: no required fields found");if("noValidate"in t)t.noValidate||console.error("form validation: the form has no noValidate attribute");else{var r=n.find("form");if(r.length>1)return void console.error("form validation: more than one form found");r[0].noValidate||console.error("form validation: the form has no noValidate attribute")}n.removeClass("invalid invalid-check invalid-select invalid-text invalid-email invalid-phone"),l.off(".checkValidity").on("input.checkValidity change.checkValidity",function(){$(this).removeClass("invalid invalid-check invalid-select invalid-text invalid-email invalid-phone")});var s=!0,a=!1,h=new RegExp(/^[\w-]+(\.[\w-]+)*@([\w-]+\.)+[a-zA-Z]+$/),d=function(e){var i=$(this);i.addClass("invalid invalid-"+e),i.siblings(".input-error").attr("data-validation-message",o.dict.validationMessage[e]),n.addClass("invalid invalid-"+e),s=!1,a||(i.focus(),a=!0)};return l.filter(".invalid").removeClass("invalid").end().each(function(){var e=this.type;return"checkbox"!==e||this.checked?"select-one"!==e&&"select-multiple"!==e||~this.selectedIndex?$.trim(this.value)?("email"!==this.type||this.value.match(h)||d.call(this,"email"),void("tel"!==this.type||this.value.match(new RegExp(this.getAttribute("data-regexp")))||d.call(this,"tel"))):void d.call(this,"text"):void d.call(this,"select"):void d.call(this,"check")}),s},onInitInputs:function(e){var i=$(e.DOM[e.form]).find("input"),t=function(){$.trim(this.value).length>0?$(this).removeClass("empty").addClass("filled"):$(this).removeClass("filled").addClass("empty")};i.each(function(){t.call(this)}).on("input",function(){t.call(this)});var n=require("./../mask.js");n(e.DOM[e.phoneInput],t)},onScrollToSection:function(e){var i=$(".content-slide"),t=i[e];t?(window.scrollTo(window.scrollX,t.offsetTop),this.navMobileVisible=!1,this.emit("change")):console.warn("section with index %i not found!",e)},getState:function(){return{slider:this.slider,heroSlider:this.heroSlider,theme:this.theme,cooperate:this.cooperate,formCooperateVisible:this.formCooperateVisible,formCooperateSent:this.formCooperateSent,formAppointmentVisible:this.formAppointmentVisible,formAppointmentSent:this.formAppointmentSent,cooperateCounter:this.cooperateCounter,weekEarnings:this.weekEarnings,selectedService:this.selectedService,serviceSelectOpen:this.serviceSelectOpen,navMobileVisible:this.navMobileVisible}}});module.exports=mehStore;
},{"./../constants":9,"./../dict":10,"./../mask.js":12}]},{},[11]);
